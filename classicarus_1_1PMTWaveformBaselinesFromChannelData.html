<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAF format: icarus::PMTWaveformBaselinesFromChannelData Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/TeX/AMSmath','[tex]/TeX/AMSsymbols']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','TeX/AMSmath','TeX/AMSsymbols']
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CAF format<span id="projectnumber">&#160;${SBNANAOBJ_VERSION}</span>
   </div>
   <div id="projectbrief">Simulation, reconstruction and analysis software for the ICARUS experiment.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceicarus.html">icarus</a></li><li class="navelem"><a class="el" href="classicarus_1_1PMTWaveformBaselinesFromChannelData.html">PMTWaveformBaselinesFromChannelData</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classicarus_1_1PMTWaveformBaselinesFromChannelData-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">icarus::PMTWaveformBaselinesFromChannelData Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Extracts a baseline from PMT waveforms.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for icarus::PMTWaveformBaselinesFromChannelData:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classicarus_1_1PMTWaveformBaselinesFromChannelData.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t" id="r_structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t">BaselineInfo_t</a></td></tr>
<tr class="memdesc:structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record of baseline information to be written.  <a href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t">More...</a><br /></td></tr>
<tr class="separator:structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config" id="r_structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config">Config</a></td></tr>
<tr class="separator:structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae121a6f618d3c44703861b2b0b257a6c" id="r_ae121a6f618d3c44703861b2b0b257a6c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae121a6f618d3c44703861b2b0b257a6c">Parameters</a> = art::SharedProducer::Table&lt;<a class="el" href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config">Config</a>&gt;</td></tr>
<tr class="separator:ae121a6f618d3c44703861b2b0b257a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a29952fe370386ab20a67f6e076bf32c7" id="r_a29952fe370386ab20a67f6e076bf32c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29952fe370386ab20a67f6e076bf32c7">PMTWaveformBaselinesFromChannelData</a> (Parameters const &amp;config, art::ProcessingFrame const &amp;)</td></tr>
<tr class="separator:a29952fe370386ab20a67f6e076bf32c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd21543772d5908a37c9c198aff18f03" id="r_abd21543772d5908a37c9c198aff18f03"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd21543772d5908a37c9c198aff18f03">beginJob</a> (art::ProcessingFrame const &amp;frame) override</td></tr>
<tr class="memdesc:abd21543772d5908a37c9c198aff18f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the plots to be filled.  <br /></td></tr>
<tr class="separator:abd21543772d5908a37c9c198aff18f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbea144be466f83c20b62f481bba99b7" id="r_acbea144be466f83c20b62f481bba99b7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbea144be466f83c20b62f481bba99b7">beginRun</a> (art::Run &amp;run, art::ProcessingFrame const &amp;) override</td></tr>
<tr class="memdesc:acbea144be466f83c20b62f481bba99b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads needed PMT configuration.  <br /></td></tr>
<tr class="separator:acbea144be466f83c20b62f481bba99b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0e222e2e7c21bce4b993e10c53b372" id="r_afe0e222e2e7c21bce4b993e10c53b372"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe0e222e2e7c21bce4b993e10c53b372">produce</a> (art::Event &amp;event, art::ProcessingFrame const &amp;) override</td></tr>
<tr class="memdesc:afe0e222e2e7c21bce4b993e10c53b372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the data products.  <br /></td></tr>
<tr class="separator:afe0e222e2e7c21bce4b993e10c53b372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0c12ebb5a347d3ae5ea1b6962eb5cc" id="r_a4e0c12ebb5a347d3ae5ea1b6962eb5cc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e0c12ebb5a347d3ae5ea1b6962eb5cc">endJob</a> (art::ProcessingFrame const &amp;frame) override</td></tr>
<tr class="memdesc:a4e0c12ebb5a347d3ae5ea1b6962eb5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove empty plots.  <br /></td></tr>
<tr class="separator:a4e0c12ebb5a347d3ae5ea1b6962eb5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a96ee1558dc4914e7edff8111756e1250" id="r_a96ee1558dc4914e7edff8111756e1250"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96ee1558dc4914e7edff8111756e1250">removeWaveformsAround</a> (std::vector&lt; raw::OpDetWaveform const * &gt; &amp;waveforms, double time) const</td></tr>
<tr class="memdesc:a96ee1558dc4914e7edff8111756e1250"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes <code>waveforms</code> containing <code>time</code>, retuning how many were removed.  <br /></td></tr>
<tr class="separator:a96ee1558dc4914e7edff8111756e1250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a671993e2ab201dd7862ca20fbc360f58" id="r_a671993e2ab201dd7862ca20fbc360f58"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a671993e2ab201dd7862ca20fbc360f58">getPretriggerBuffer</a> (<a class="el" href="structsbn_1_1PMTconfiguration.html">sbn::PMTconfiguration</a> const &amp;PMTconfig) const</td></tr>
<tr class="memdesc:a671993e2ab201dd7862ca20fbc360f58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the smallest pre-trigger buffer size available among all boards.  <br /></td></tr>
<tr class="separator:a671993e2ab201dd7862ca20fbc360f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb6af4fcef8139ead7b50e247282f4c" id="r_a5cb6af4fcef8139ead7b50e247282f4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5cb6af4fcef8139ead7b50e247282f4c">setupPlots</a> (art::ProcessingFrame const &amp;frame)</td></tr>
<tr class="memdesc:a5cb6af4fcef8139ead7b50e247282f4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates all the plots to be filled by the module.  <br /></td></tr>
<tr class="separator:a5cb6af4fcef8139ead7b50e247282f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa14dca729f85756094aef0040855bed8" id="r_aa14dca729f85756094aef0040855bed8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa14dca729f85756094aef0040855bed8">buildBaselineGraphs</a> (art::ProcessingFrame const &amp;frame)</td></tr>
<tr class="memdesc:aa14dca729f85756094aef0040855bed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the empty plots.  <br /></td></tr>
<tr class="separator:aa14dca729f85756094aef0040855bed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa1137e92f43e3ce1ef096466758f6576" id="r_aa1137e92f43e3ce1ef096466758f6576"><td class="memItemLeft" align="right" valign="top">art::InputTag const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1137e92f43e3ce1ef096466758f6576">fOpDetWaveformTag</a></td></tr>
<tr class="memdesc:aa1137e92f43e3ce1ef096466758f6576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input optical waveform tag.  <br /></td></tr>
<tr class="separator:aa1137e92f43e3ce1ef096466758f6576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cb238e77d78c5af3389dedc9f13e2d" id="r_a27cb238e77d78c5af3389dedc9f13e2d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27cb238e77d78c5af3389dedc9f13e2d">fExcludeSpillTimeIfMoreThan</a></td></tr>
<tr class="memdesc:a27cb238e77d78c5af3389dedc9f13e2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum number of waveforms when excluding trigger one is allowed.  <br /></td></tr>
<tr class="separator:a27cb238e77d78c5af3389dedc9f13e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0e89784bdce184032575646eaf6b40" id="r_a3e0e89784bdce184032575646eaf6b40"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a></td></tr>
<tr class="memdesc:a3e0e89784bdce184032575646eaf6b40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Samples in the pre-trigger buffer.  <br /></td></tr>
<tr class="separator:a3e0e89784bdce184032575646eaf6b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05216685e146d9ee28ef0b183db509a8" id="r_a05216685e146d9ee28ef0b183db509a8"><td class="memItemLeft" align="right" valign="top">std::optional&lt; art::InputTag &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a></td></tr>
<tr class="memdesc:a05216685e146d9ee28ef0b183db509a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tag for PMT configuration data product.  <br /></td></tr>
<tr class="separator:a05216685e146d9ee28ef0b183db509a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7d91d983aa05a15bd861b6246860282" id="r_ac7d91d983aa05a15bd861b6246860282"><td class="memItemLeft" align="right" valign="top">float const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7d91d983aa05a15bd861b6246860282">fSampleFraction</a></td></tr>
<tr class="memdesc:ac7d91d983aa05a15bd861b6246860282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fraction of pretrigger buffer to use.  <br /></td></tr>
<tr class="separator:ac7d91d983aa05a15bd861b6246860282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab68518eab3b21f6f5b962b398a955b" id="r_a1ab68518eab3b21f6f5b962b398a955b"><td class="memItemLeft" align="right" valign="top">opdet::SharedWaveformBaseline::Params_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ab68518eab3b21f6f5b962b398a955b">fAlgoParams</a></td></tr>
<tr class="memdesc:a1ab68518eab3b21f6f5b962b398a955b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters for the baseline algorithm.  <br /></td></tr>
<tr class="separator:a1ab68518eab3b21f6f5b962b398a955b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8481c2b7fc38ded9ebf9ead93eebb69" id="r_af8481c2b7fc38ded9ebf9ead93eebb69"><td class="memItemLeft" align="right" valign="top">bool const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8481c2b7fc38ded9ebf9ead93eebb69">fPlotBaselines</a></td></tr>
<tr class="memdesc:af8481c2b7fc38ded9ebf9ead93eebb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to produce plots.  <br /></td></tr>
<tr class="separator:af8481c2b7fc38ded9ebf9ead93eebb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6702288d7eb27ed174a9672341a26963" id="r_a6702288d7eb27ed174a9672341a26963"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6702288d7eb27ed174a9672341a26963">fBaselineTimeAverage</a> { 0.0 }</td></tr>
<tr class="memdesc:a6702288d7eb27ed174a9672341a26963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Width of baseline time profile binning [s].  <br /></td></tr>
<tr class="separator:a6702288d7eb27ed174a9672341a26963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db195dfaafb91682a35656145abb74a" id="r_a5db195dfaafb91682a35656145abb74a"><td class="memItemLeft" align="right" valign="top">std::string const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5db195dfaafb91682a35656145abb74a">fLogCategory</a></td></tr>
<tr class="memdesc:a5db195dfaafb91682a35656145abb74a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Category name for the console output stream.  <br /></td></tr>
<tr class="separator:a5db195dfaafb91682a35656145abb74a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e1f639a6ce9ebcfc7435293dda6536" id="r_a12e1f639a6ce9ebcfc7435293dda6536"><td class="memItemLeft" align="right" valign="top">util::quantities::intervals::nanoseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12e1f639a6ce9ebcfc7435293dda6536">fOpticalTick</a></td></tr>
<tr class="memdesc:a12e1f639a6ce9ebcfc7435293dda6536"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration of a PMT digitizer tick.  <br /></td></tr>
<tr class="separator:a12e1f639a6ce9ebcfc7435293dda6536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a78d706692ee440f9ae611e051820eb" id="r_a9a78d706692ee440f9ae611e051820eb"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a78d706692ee440f9ae611e051820eb">fNPlotChannels</a> = 0U</td></tr>
<tr class="memdesc:a9a78d706692ee440f9ae611e051820eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of plotted channels.  <br /></td></tr>
<tr class="separator:a9a78d706692ee440f9ae611e051820eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c17db7b59c01fb930d3322f87bd790a" id="r_a4c17db7b59c01fb930d3322f87bd790a"><td class="memItemLeft" align="right" valign="top">TH2 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c17db7b59c01fb930d3322f87bd790a">fHBaselines</a> = nullptr</td></tr>
<tr class="memdesc:a4c17db7b59c01fb930d3322f87bd790a"><td class="mdescLeft">&#160;</td><td class="mdescRight">All baselines, per channel.  <br /></td></tr>
<tr class="separator:a4c17db7b59c01fb930d3322f87bd790a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac86ee049a7780f1d4ed3a0ec6e94e5ef" id="r_ac86ee049a7780f1d4ed3a0ec6e94e5ef"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::pair&lt; double, double &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a></td></tr>
<tr class="memdesc:ac86ee049a7780f1d4ed3a0ec6e94e5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each channel, all event times and their baselines.  <br /></td></tr>
<tr class="separator:ac86ee049a7780f1d4ed3a0ec6e94e5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Extracts a baseline from PMT waveforms. </p>
<p>This module produces a baseline data product for each optical detector waveform. The algorithm extracts a baseline per channel per event, considering all the waveforms from one channel together, under the assumptions that:</p>
<ol type="1">
<li>the baseline is not going to change during the few milliseconds of readout</li>
<li>the beginning of the waveform is on its baseline level</li>
</ol>
<h1>The algorithm </h1>
<p>The core of the algorithm is described in its own class, <code>opdet::SharedWaveformBaseline</code>.</p>
<p>On each event independently, the waveforms are grouped by channel. For each waveform, <code>opdet::SharedWaveformBaseline</code> considers their first part for baseline calculation. The number of samples of that part is specified as a fraction of the pre-trigger buffer. The pre-trigger buffer includes the samples that were collected before the physics activity that causes the data acquisition happened, and as such is expected to be almost completely free of physics signal and to be made of just electronics noise. The size of this prebuffer is determined in data by the readout configuration, which can be accessed by specifying the parameter <code>PMTconfigurationTag</code>, and in simulation by a digitization module parameter, which can be replicated here by the parameter <code>PretriggerBufferSize</code>. The fraction of such buffer used for the baseline estimation is also specified by a configuration parameter (<code>PretriggerBufferFractionForBaseline</code>). Depending on the value of the configuration parameter <code>ExcludeSpillTimeIfMoreThan</code>, the one waveform that covers the trigger time may be excluded and not used; the rationale is that there is a conspicuous number of events triggered by the late light of a cosmic ray happening before the beam spill, in which case the activity may contaminate the pre-trigger buffer and could bias the estimation of the baseline.</p>
<p>The result of the <code>opdet::SharedWaveformBaseline</code> is currently used directly as the baseline for all the waveforms on the channel on that event.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo</a></b></dt><dd>Add run-level information and checks.</dd></dl>
<h1>Output data products </h1>
<ul>
<li>a data product of type <code>std::vector&lt;<a class="el" href="structicarus_1_1WaveformBaseline.html" title="Class containing a waveform baseline value.">icarus::WaveformBaseline</a>&gt;</code>, with one baseline per input waveform; the baselines are guaranteed to be in the same order as the waveforms in the input collection;</li>
<li>a data product of type <code>std::vector&lt;<a class="el" href="structicarus_1_1WaveformRMS.html" title="Class containing a waveform baseline RMS value.">icarus::WaveformRMS</a>&gt;</code>, with one baseline RMS per input waveform; the baselines are guaranteed to be in the same order as the waveforms in the input collection;</li>
<li>two <em>art</em> associations, with one baseline and one RMS per input optical waveform; normally this is not needed as long as the original PMT waveform data product is available; the type of the associations are <code>art::Assns&lt;<a class="el" href="structicarus_1_1WaveformBaseline.html" title="Class containing a waveform baseline value.">icarus::WaveformBaseline</a>, raw::OpDetWaveform&gt;</code> and <code>art::Assns&lt;<a class="el" href="structicarus_1_1WaveformRMS.html" title="Class containing a waveform baseline RMS value.">icarus::WaveformRMS</a>, raw::OpDetWaveform&gt;</code>.</li>
</ul>
<h2>Output plots </h2>
<ul>
<li><code>Baselines</code>: baseline distribution, per channel; average baseline [ADC] per event per channel; all waveforms on the same channels in a single event contribute to the average, and channels with no waveforms in an event do not contribute an entry for that event.</li>
</ul>
<h1>Input data products </h1>
<ul>
<li><code>std::vector&lt;raw::OpDetWaveform&gt;</code>: a single waveform for each recorded optical detector activity; the activity belongs to a single channel, but there may be multiple waveforms on the same channel.</li>
</ul>
<h2>Service requirements </h2>
<ul>
<li><code>DetectorClocksService</code> for the determination of the optical tick duration and the trigger time (if the exclusion of waveform with trigger is enabled).</li>
<li><code>TFileService</code> and <code>Geometry</code> if <code>PlotBaselines</code> is enabled.</li>
</ul>
<h1>Configuration parameters </h1>
<p>A terse description of the parameters is printed by running <code>lar --print-description <a class="el" href="classicarus_1_1PMTWaveformBaselinesFromChannelData.html" title="Extracts a baseline from PMT waveforms.">PMTWaveformBaselinesFromChannelData</a></code>.</p>
<ul>
<li><code>OpticalWaveforms</code> (input tag, mandatory): the data product containing all optical detector waveforms;</li>
<li><code>PretriggerBufferSize</code> (positive integer, optional): the number of samples collected by the PMT readout before the PMT signal. This number is used as base for the size of the initial part of the waveform to be used in baseline calculation. This and <code>PMTconfigurationTag</code> parameters are exclusive. This one is expected to be preferred for simulated samples.</li>
<li><code>PMTconfigurationTag</code> (input tag): the (run) data product containing the PMT readout configuration. This is extracted from the run configuration for data events. The pre-trigger buffer size is read from this data product, and used as base for the size of the initial part of the waveform to be used in baseline calculation. This and <code>PretriggerBufferSize</code> parameters are exclusive. This one is expected to be preferred for data samples.</li>
<li><code>PretriggerBufferFractionForBaseline</code> (real, default: <code>0.5</code>): the fraction of the pre-trigger buffer (see <code>PretriggerBufferSize</code> and <code>PMTconfigurationTag</code> parameters) to be used to extract the baseline.</li>
<li><code>ExcludeSpillTimeIfMoreThan</code> (integer, default: disable): the minimum number of PMT waveforms on a single channel of a single event, in order for the exclusion of the waveform containing the global trigger to be enabled. By default (huge number) the feature is disabled.</li>
<li><code>AlgoParams</code> (table): configuration of the core algorithm extracting the baseline from a set of waveforms on the same channel. The configuration is as follows:<ul>
<li><code>AcceptedSampleRangeRMS</code> (real): for a waveform to be considered for the baseline, the values of the samples must stay within a certain range, which is defined as this number of RMS away in either directions from a central value that is a rougher estimation of the baseline.</li>
<li><code>ExcessSampleLimit</code> (integer): for a waveform to be considered for the baseline, there must be less than this number of samples in a row that are outside of the range defined by <code>AcceptedSampleRangeRMS</code> parameter.</li>
</ul>
</li>
<li><code>PlotBaselines</code> (flag, default: <code>true</code>): whether to produce distributions of the extracted baselines.</li>
<li><code>BaselineTimeAverage</code> (real number, default: <code>600.0</code>): binning of the baseline profile vs. time, in seconds. Requires <code>PlotBaselines</code> to be set.</li>
<li><code>OutputCategory</code> (string, default: <code>"PMTWaveformBaselinesFromChannelData"</code>): label for the category of messages in the console output; this is the label that can be used for filtering messages via MessageFacility service configuration. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00207">207</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
</div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t" id="structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t">&#9670;&#160;</a></span>icarus::PMTWaveformBaselinesFromChannelData::BaselineInfo_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct icarus::PMTWaveformBaselinesFromChannelData::BaselineInfo_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Record of baseline information to be written. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00372">372</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a730a5ecf607efe3fb312c69ef2df120d" name="a730a5ecf607efe3fb312c69ef2df120d"></a><a class="el" href="structicarus_1_1WaveformBaseline.html">WaveformBaseline</a></td>
<td class="fieldname">
baseline</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a0f07635b01ad6c86a07b9b39e6c932bc" name="a0f07635b01ad6c86a07b9b39e6c932bc"></a><a class="el" href="structicarus_1_1WaveformRMS.html">WaveformRMS</a></td>
<td class="fieldname">
RMS</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config" id="structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config">&#9670;&#160;</a></span>icarus::PMTWaveformBaselinesFromChannelData::Config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct icarus::PMTWaveformBaselinesFromChannelData::Config</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00212">212</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a7e2880af6512bc550d15c1ef6ac7938d" name="a7e2880af6512bc550d15c1ef6ac7938d"></a>typedef Comment</td>
<td class="fieldname">
Comment fhicl::Comment</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a572dd0c7259b5d95a5513597f68f5765" name="a572dd0c7259b5d95a5513597f68f5765"></a>typedef Name</td>
<td class="fieldname">
Name fhicl::Name</td>
<td class="fielddoc">
</td></tr>
</table>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a0d18595bfdf4cd65c257f9e920f41501" name="a0d18595bfdf4cd65c257f9e920f41501"></a>TableAs&lt; Params_t, <a class="el" href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config_1_1AlgoConfig">AlgoConfig</a> &gt;</td>
<td class="fieldname">
AlgoParams</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a9a5b99838de4b178d05037595a9e4a23" name="a9a5b99838de4b178d05037595a9e4a23"></a>Atom&lt; double &gt;</td>
<td class="fieldname">
BaselineTimeAverage</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a2fe27764f591f9e5d03a77d05138c6ef" name="a2fe27764f591f9e5d03a77d05138c6ef"></a>Atom&lt; unsigned int &gt;</td>
<td class="fieldname">
ExcludeSpillTimeIfMoreThan</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ab91713f3fedbc62d76688c2f0392aa80" name="ab91713f3fedbc62d76688c2f0392aa80"></a>Atom&lt; InputTag &gt;</td>
<td class="fieldname">
OpticalWaveforms</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a1e4df807b328c95d9a54d82eb2c502f1" name="a1e4df807b328c95d9a54d82eb2c502f1"></a>Atom&lt; string &gt;</td>
<td class="fieldname">
OutputCategory</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a6f05a4ed9a4e22fd3b26fdb482106b7d" name="a6f05a4ed9a4e22fd3b26fdb482106b7d"></a>Atom&lt; bool &gt;</td>
<td class="fieldname">
PlotBaselines</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a54fc753d80babc2bb99805865c5175e7" name="a54fc753d80babc2bb99805865c5175e7"></a>OptionalAtom&lt; InputTag &gt;</td>
<td class="fieldname">
PMTconfigurationTag</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a81752e44bc72b161484e4b6216fde8ae" name="a81752e44bc72b161484e4b6216fde8ae"></a>Atom&lt; float &gt;</td>
<td class="fieldname">
PretriggerBufferFractionForBaseline</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a597ff06385e4339886241da1c03f8ad0" name="a597ff06385e4339886241da1c03f8ad0"></a>OptionalAtom&lt; unsigned int &gt;</td>
<td class="fieldname">
PretriggerBufferSize</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ae121a6f618d3c44703861b2b0b257a6c" name="ae121a6f618d3c44703861b2b0b257a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae121a6f618d3c44703861b2b0b257a6c">&#9670;&#160;</a></span>Parameters</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using icarus::PMTWaveformBaselinesFromChannelData::Parameters = art::SharedProducer::Table&lt;<a class="el" href="#structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config">Config</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00298">298</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a29952fe370386ab20a67f6e076bf32c7" name="a29952fe370386ab20a67f6e076bf32c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29952fe370386ab20a67f6e076bf32c7">&#9670;&#160;</a></span>PMTWaveformBaselinesFromChannelData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::PMTWaveformBaselinesFromChannelData::PMTWaveformBaselinesFromChannelData </td>
          <td>(</td>
          <td class="paramtype">Parameters const &amp;</td>          <td class="paramname"><span class="paramname"><em>config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00456">456</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abd21543772d5908a37c9c198aff18f03" name="abd21543772d5908a37c9c198aff18f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd21543772d5908a37c9c198aff18f03">&#9670;&#160;</a></span>beginJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::beginJob </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares the plots to be filled. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00523">523</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="acbea144be466f83c20b62f481bba99b7" name="acbea144be466f83c20b62f481bba99b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbea144be466f83c20b62f481bba99b7">&#9670;&#160;</a></span>beginRun()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::beginRun </td>
          <td>(</td>
          <td class="paramtype">art::Run &amp;</td>          <td class="paramname"><span class="paramname"><em>run</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads needed PMT configuration. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00536">536</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="aa14dca729f85756094aef0040855bed8" name="aa14dca729f85756094aef0040855bed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa14dca729f85756094aef0040855bed8">&#9670;&#160;</a></span>buildBaselineGraphs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::buildBaselineGraphs </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the empty plots. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00778">778</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a4e0c12ebb5a347d3ae5ea1b6962eb5cc" name="a4e0c12ebb5a347d3ae5ea1b6962eb5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0c12ebb5a347d3ae5ea1b6962eb5cc">&#9670;&#160;</a></span>endJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::endJob </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove empty plots. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00695">695</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a671993e2ab201dd7862ca20fbc360f58" name="a671993e2ab201dd7862ca20fbc360f58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a671993e2ab201dd7862ca20fbc360f58">&#9670;&#160;</a></span>getPretriggerBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::getPretriggerBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsbn_1_1PMTconfiguration.html">sbn::PMTconfiguration</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>PMTconfig</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the smallest pre-trigger buffer size available among all boards. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00731">731</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

<p class="reference">References <a class="el" href="structsbn_1_1PMTconfiguration.html#ad421729a1e29bf061192b19a51213f54">sbn::PMTconfiguration::boards</a>, and <a class="el" href="structsbn_1_1V1730Configuration.html#a6ef387baa039de4a9bdd3088538f6484">sbn::V1730Configuration::preTriggerTicks()</a>.</p>

</div>
</div>
<a id="afe0e222e2e7c21bce4b993e10c53b372" name="afe0e222e2e7c21bce4b993e10c53b372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0e222e2e7c21bce4b993e10c53b372">&#9670;&#160;</a></span>produce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::produce </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;</td>          <td class="paramname"><span class="paramname"><em>event</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the data products. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00562">562</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

<p class="reference">References <a class="el" href="structicarus_1_1WaveformBaseline.html#ab50baebfebbd0386ccbc298c57b64a90">icarus::WaveformBaseline::baseline()</a>.</p>

</div>
</div>
<a id="a96ee1558dc4914e7edff8111756e1250" name="a96ee1558dc4914e7edff8111756e1250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96ee1558dc4914e7edff8111756e1250">&#9670;&#160;</a></span>removeWaveformsAround()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::removeWaveformsAround </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; raw::OpDetWaveform const * &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>waveforms</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>time</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes <code>waveforms</code> containing <code>time</code>, retuning how many were removed. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00751">751</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a5cb6af4fcef8139ead7b50e247282f4c" name="a5cb6af4fcef8139ead7b50e247282f4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cb6af4fcef8139ead7b50e247282f4c">&#9670;&#160;</a></span>setupPlots()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::setupPlots </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates all the plots to be filled by the module. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00705">705</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1ab68518eab3b21f6f5b962b398a955b" name="a1ab68518eab3b21f6f5b962b398a955b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab68518eab3b21f6f5b962b398a955b">&#9670;&#160;</a></span>fAlgoParams</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">opdet::SharedWaveformBaseline::Params_t icarus::PMTWaveformBaselinesFromChannelData::fAlgoParams</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parameters for the baseline algorithm. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00347">347</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="ac86ee049a7780f1d4ed3a0ec6e94e5ef" name="ac86ee049a7780f1d4ed3a0ec6e94e5ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac86ee049a7780f1d4ed3a0ec6e94e5ef">&#9670;&#160;</a></span>fBaselinesVsTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;std::pair&lt;double, double&gt; &gt; &gt; icarus::PMTWaveformBaselinesFromChannelData::fBaselinesVsTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each channel, all event times and their baselines. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00381">381</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a6702288d7eb27ed174a9672341a26963" name="a6702288d7eb27ed174a9672341a26963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6702288d7eb27ed174a9672341a26963">&#9670;&#160;</a></span>fBaselineTimeAverage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const icarus::PMTWaveformBaselinesFromChannelData::fBaselineTimeAverage { 0.0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Width of baseline time profile binning [s]. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00352">352</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a27cb238e77d78c5af3389dedc9f13e2d" name="a27cb238e77d78c5af3389dedc9f13e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27cb238e77d78c5af3389dedc9f13e2d">&#9670;&#160;</a></span>fExcludeSpillTimeIfMoreThan</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::fExcludeSpillTimeIfMoreThan</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum number of waveforms when excluding trigger one is allowed. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00335">335</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a4c17db7b59c01fb930d3322f87bd790a" name="a4c17db7b59c01fb930d3322f87bd790a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c17db7b59c01fb930d3322f87bd790a">&#9670;&#160;</a></span>fHBaselines</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TH2* icarus::PMTWaveformBaselinesFromChannelData::fHBaselines = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>All baselines, per channel. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00378">378</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a5db195dfaafb91682a35656145abb74a" name="a5db195dfaafb91682a35656145abb74a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5db195dfaafb91682a35656145abb74a">&#9670;&#160;</a></span>fLogCategory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string const icarus::PMTWaveformBaselinesFromChannelData::fLogCategory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Category name for the console output stream. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00354">354</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a9a78d706692ee440f9ae611e051820eb" name="a9a78d706692ee440f9ae611e051820eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a78d706692ee440f9ae611e051820eb">&#9670;&#160;</a></span>fNPlotChannels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t icarus::PMTWaveformBaselinesFromChannelData::fNPlotChannels = 0U</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of plotted channels. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00377">377</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="aa1137e92f43e3ce1ef096466758f6576" name="aa1137e92f43e3ce1ef096466758f6576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1137e92f43e3ce1ef096466758f6576">&#9670;&#160;</a></span>fOpDetWaveformTag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">art::InputTag const icarus::PMTWaveformBaselinesFromChannelData::fOpDetWaveformTag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Input optical waveform tag. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00332">332</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a12e1f639a6ce9ebcfc7435293dda6536" name="a12e1f639a6ce9ebcfc7435293dda6536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e1f639a6ce9ebcfc7435293dda6536">&#9670;&#160;</a></span>fOpticalTick</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">util::quantities::intervals::nanoseconds icarus::PMTWaveformBaselinesFromChannelData::fOpticalTick</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duration of a PMT digitizer tick. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00362">362</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="af8481c2b7fc38ded9ebf9ead93eebb69" name="af8481c2b7fc38ded9ebf9ead93eebb69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8481c2b7fc38ded9ebf9ead93eebb69">&#9670;&#160;</a></span>fPlotBaselines</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool const icarus::PMTWaveformBaselinesFromChannelData::fPlotBaselines</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to produce plots. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00349">349</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a05216685e146d9ee28ef0b183db509a8" name="a05216685e146d9ee28ef0b183db509a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05216685e146d9ee28ef0b183db509a8">&#9670;&#160;</a></span>fPMTconfigTag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;art::InputTag&gt; icarus::PMTWaveformBaselinesFromChannelData::fPMTconfigTag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tag for PMT configuration data product. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00341">341</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="a3e0e89784bdce184032575646eaf6b40" name="a3e0e89784bdce184032575646eaf6b40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e0e89784bdce184032575646eaf6b40">&#9670;&#160;</a></span>fPretriggerSamples</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::fPretriggerSamples</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Samples in the pre-trigger buffer. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00338">338</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a id="ac7d91d983aa05a15bd861b6246860282" name="ac7d91d983aa05a15bd861b6246860282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7d91d983aa05a15bd861b6246860282">&#9670;&#160;</a></span>fSampleFraction</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float const icarus::PMTWaveformBaselinesFromChannelData::fSampleFraction</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fraction of pretrigger buffer to use. </p>

<p class="definition">Definition at line <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00343">343</a> of file <a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>icaruscode/icaruscode/PMT/<a class="el" href="PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
