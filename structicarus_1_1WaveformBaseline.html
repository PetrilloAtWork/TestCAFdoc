<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAF format: icarus::WaveformBaseline Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/TeX/AMSmath','[tex]/TeX/AMSsymbols']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','TeX/AMSmath','TeX/AMSsymbols']
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CAF format<span id="projectnumber">&#160;${SBNANAOBJ_VERSION}</span>
   </div>
   <div id="projectbrief">Simulation, reconstruction and analysis software for the ICARUS experiment.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceicarus.html">icarus</a></li><li class="navelem"><a class="el" href="structicarus_1_1WaveformBaseline.html">WaveformBaseline</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structicarus_1_1WaveformBaseline-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">icarus::WaveformBaseline Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class containing a waveform baseline value.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a4594cbd2e8637ff47dabb8ace42d24f7" id="r_a4594cbd2e8637ff47dabb8ace42d24f7"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a> = float</td></tr>
<tr class="memdesc:a4594cbd2e8637ff47dabb8ace42d24f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of baseline value.  <br /></td></tr>
<tr class="separator:a4594cbd2e8637ff47dabb8ace42d24f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ade6715e2458ec013ef31617d72c1d983" id="r_ade6715e2458ec013ef31617d72c1d983"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade6715e2458ec013ef31617d72c1d983">WaveformBaseline</a> ()=default</td></tr>
<tr class="memdesc:ade6715e2458ec013ef31617d72c1d983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor: default baseline (<code>0</code>).  <br /></td></tr>
<tr class="separator:ade6715e2458ec013ef31617d72c1d983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64994f7725184eddd5b44d5c353232ab" id="r_a64994f7725184eddd5b44d5c353232ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64994f7725184eddd5b44d5c353232ab">WaveformBaseline</a> (<a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a> <a class="el" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline</a>)</td></tr>
<tr class="memdesc:a64994f7725184eddd5b44d5c353232ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor: sets the baseline.  <br /></td></tr>
<tr class="separator:a64994f7725184eddd5b44d5c353232ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Access to the baseline</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>In addition to the direct method (<code><a class="el" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline()</a></code>) a few candies are offered: a function-like operator for baseline access. </p>
</div></td></tr>
<tr class="memitem:ab50baebfebbd0386ccbc298c57b64a90" id="r_ab50baebfebbd0386ccbc298c57b64a90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline</a> () const</td></tr>
<tr class="separator:ab50baebfebbd0386ccbc298c57b64a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33930cdbc71c60d92c34e42b0f14ddc2" id="r_a33930cdbc71c60d92c34e42b0f14ddc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33930cdbc71c60d92c34e42b0f14ddc2">operator()</a> () const</td></tr>
<tr class="memdesc:a33930cdbc71c60d92c34e42b0f14ddc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current baseline value.  <br /></td></tr>
<tr class="separator:a33930cdbc71c60d92c34e42b0f14ddc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af2a08944ed6cbdf4b81771b0c5ae6b42" id="r_af2a08944ed6cbdf4b81771b0c5ae6b42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2a08944ed6cbdf4b81771b0c5ae6b42">fBaseline</a> {}</td></tr>
<tr class="memdesc:af2a08944ed6cbdf4b81771b0c5ae6b42"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current value of the baseline.  <br /></td></tr>
<tr class="separator:af2a08944ed6cbdf4b81771b0c5ae6b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class containing a waveform baseline value. </p>
<p>The baseline is stored as a floating point value, not to lose precision.</p>
<p>This class is a data product wrapper for a simple value, with some usability candies attached.</p>
<h2>Example of simple usage </h2>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structicarus_1_1WaveformBaseline.html">icarus::WaveformBaseline</a> <span class="keyword">const</span> <a class="code hl_function" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline</a> { 1.2f };</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Baseline: &quot;</span> &lt;&lt; <a class="code hl_function" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline</a> &lt;&lt; <span class="stringliteral">&quot; ADC&quot;</span> &lt;&lt; std::endl;</div>
<div class="ttc" id="astructicarus_1_1WaveformBaseline_html"><div class="ttname"><a href="structicarus_1_1WaveformBaseline.html">icarus::WaveformBaseline</a></div><div class="ttdoc">Class containing a waveform baseline value.</div><div class="ttdef"><b>Definition</b> <a href="WaveformBaseline_8h_source.html#l00084">WaveformBaseline.h:84</a></div></div>
<div class="ttc" id="astructicarus_1_1WaveformBaseline_html_ab50baebfebbd0386ccbc298c57b64a90"><div class="ttname"><a href="#ab50baebfebbd0386ccbc298c57b64a90">icarus::WaveformBaseline::baseline</a></div><div class="ttdeci">Baseline_t baseline() const</div><div class="ttdef"><b>Definition</b> <a href="WaveformBaseline_8h_source.html#l00112">WaveformBaseline.h:112</a></div></div>
</div><!-- fragment --><p> will print <code>Baseline: 1.2 ADC</code>.</p>
<h2>Example of usage with quantity values </h2>
<p>The following is a more complex example showing baseline subtraction. We assume we are using the type <code>util::quantities::counts</code> as ADC count type (defined in <code>lardataalg/Utilities/quantities/electronics.h</code>) for the waveform. </p><div class="fragment"><div class="line"><span class="keyword">using </span>ADCCount_t = util::quantities::counts;</div>
<div class="line">std::vector&lt;ADCCount_t&gt; subtractBaseline</div>
<div class="line">  (std::vector&lt;ADCCount_t&gt; <span class="keyword">const</span>&amp; data, <a class="code hl_struct" href="structicarus_1_1WaveformBaseline.html">icarus::WaveformBaseline</a> <span class="keyword">const</span>&amp; <a class="code hl_function" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline</a>)</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line">  icarus::waveform_operations::NegativePolarityOperations&lt;float&gt; <span class="keyword">const</span></div>
<div class="line">    waveOps { <a class="code hl_function" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline</a>() };</div>
<div class="line">  </div>
<div class="line">  std::vector&lt;ADCCount_t&gt; subtracted;</div>
<div class="line">  subtracted.reserve(data.size());</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> sample: data) {</div>
<div class="line">    subtracted.emplace_back</div>
<div class="line">      (std::round(waveOps.subtractBaseline(sample.value())));</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> subtracted;</div>
<div class="line">} <span class="comment">// subtractBaseline()</span></div>
</div><!-- fragment --><p> The <code>subtracted</code> waveform is positive and baseline-subtracted. We use ICARUS utilities to manage the polarity of the waveform (hard-coded negative). Note that the subtraction is less than trivial because of the integral type waveform on top of the floating point baseline. The samples are converted into floating point for the subtraction, then reconverted (rounded) back. </p>

<p class="definition">Definition at line <a class="el" href="WaveformBaseline_8h_source.html#l00084">84</a> of file <a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a4594cbd2e8637ff47dabb8ace42d24f7" name="a4594cbd2e8637ff47dabb8ace42d24f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4594cbd2e8637ff47dabb8ace42d24f7">&#9670;&#160;</a></span>Baseline_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">icarus::WaveformBaseline::Baseline_t</a> = float</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of baseline value. </p>

<p class="definition">Definition at line <a class="el" href="WaveformBaseline_8h_source.html#l00086">86</a> of file <a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ade6715e2458ec013ef31617d72c1d983" name="ade6715e2458ec013ef31617d72c1d983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade6715e2458ec013ef31617d72c1d983">&#9670;&#160;</a></span>WaveformBaseline() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::WaveformBaseline::WaveformBaseline </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor: default baseline (<code>0</code>). </p>

</div>
</div>
<a id="a64994f7725184eddd5b44d5c353232ab" name="a64994f7725184eddd5b44d5c353232ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64994f7725184eddd5b44d5c353232ab">&#9670;&#160;</a></span>WaveformBaseline() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::WaveformBaseline::WaveformBaseline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a></td>          <td class="paramname"><span class="paramname"><em>baseline</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor: sets the baseline. </p>

<p class="definition">Definition at line <a class="el" href="WaveformBaseline_8h_source.html#l00097">97</a> of file <a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab50baebfebbd0386ccbc298c57b64a90" name="ab50baebfebbd0386ccbc298c57b64a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50baebfebbd0386ccbc298c57b64a90">&#9670;&#160;</a></span>baseline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a> icarus::WaveformBaseline::baseline </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the current baseline value. </p>

<p class="definition">Definition at line <a class="el" href="WaveformBaseline_8h_source.html#l00112">112</a> of file <a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>.</p>

<p class="reference">References <a class="el" href="#af2a08944ed6cbdf4b81771b0c5ae6b42">fBaseline</a>.</p>

<p class="reference">Referenced by <a class="el" href="classicarus_1_1trigger_1_1DiscriminatedAdderSignal.html#a379fc5c8ea1c2b98eb8bb6e48fa56c12">icarus::trigger::DiscriminatedAdderSignal::addWaveformsInInterval()</a>, <a class="el" href="classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#af4f97dc69dfbd8355bf4429e87a4e97c">opdet::factory::FWInterfaced&lt; pmtana::PedAlgoFixed, pmtana::PMTPedestalBase, ArtTraits &gt;::doBeginEvent()</a>, <a class="el" href="#a33930cdbc71c60d92c34e42b0f14ddc2">operator()()</a>, <a class="el" href="namespaceicarus.html#ac727d4484268ecdffa97fd906203331e">icarus::operator&lt;&lt;()</a>, <a class="el" href="structsbn_1_1V1730channelConfiguration.html#a7329f9fa2d1928fbf7073be57018a802">sbn::V1730channelConfiguration::operator==()</a>, <a class="el" href="classicarus_1_1PMTWaveformBaselines.html#ab325a7d4401ac7e8fac287f30c3f7ac5">icarus::PMTWaveformBaselines::produce()</a>, <a class="el" href="classicarus_1_1PMTWaveformBaselinesFromChannelData.html#afe0e222e2e7c21bce4b993e10c53b372">icarus::PMTWaveformBaselinesFromChannelData::produce()</a>, and <a class="el" href="classicarus_1_1opdet_1_1DiscretePhotoelectronPulse.html#a26d952d97306e67da7cb5207b07bf240">icarus::opdet::DiscretePhotoelectronPulse::sampleShape()</a>.</p>

</div>
</div>
<a id="a33930cdbc71c60d92c34e42b0f14ddc2" name="a33930cdbc71c60d92c34e42b0f14ddc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33930cdbc71c60d92c34e42b0f14ddc2">&#9670;&#160;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a> icarus::WaveformBaseline::operator() </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current baseline value. </p>

<p class="definition">Definition at line <a class="el" href="WaveformBaseline_8h_source.html#l00115">115</a> of file <a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>.</p>

<p class="reference">References <a class="el" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af2a08944ed6cbdf4b81771b0c5ae6b42" name="af2a08944ed6cbdf4b81771b0c5ae6b42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2a08944ed6cbdf4b81771b0c5ae6b42">&#9670;&#160;</a></span>fBaseline</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a4594cbd2e8637ff47dabb8ace42d24f7">Baseline_t</a> icarus::WaveformBaseline::fBaseline {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current value of the baseline. </p>

<p class="definition">Definition at line <a class="el" href="WaveformBaseline_8h_source.html#l00088">88</a> of file <a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="#ab50baebfebbd0386ccbc298c57b64a90">baseline()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>sbnobj/sbnobj/ICARUS/PMT/Data/<a class="el" href="WaveformBaseline_8h_source.html">WaveformBaseline.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
